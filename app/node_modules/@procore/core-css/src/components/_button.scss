@import "../settings/variables";
@import "../tools/arrows";
@import "../tools/buttons";
@import "../tools/forms";
@import "../generic/fonts";

.button {
  align-items: center;
  cursor: pointer;
  display: inline-flex;
  outline: none;
  position: relative;
  vertical-align: middle;
  white-space: nowrap;

  &--block {
    width: 100%;
    text-align: left;
    padding: 10px;
    font-size: 14px;
    line-height: 16px;
    font-weight: 600;
  }

  &--primary {
    @include button-primary($button-primary-fill, $button-primary-hover-fill);
  }

  &--error-outline {
    @include button-inverted-outline($banner-background-color-error);
  }

  &--success-outline {
    @include button-inverted-outline($banner-background-color-success);
  }

  &--action-outline {
    @include button-inverted-outline($banner-background-color-action);
  }

  &--info-outline {
    @include button-inverted-outline($banner-background-color-info);
  }

  &--secondary {
    @include button-outline(
      $button-secondary-hover-fill,
      $button-secondary-border
    );
  }

  &--tertiary {
    @include button-no-outline(
      $button-tertiary-hover-fill,
      $button-tertiary-hover-border
    );
  }

  &--form {
    @include button-primary($button-form-fill, $button-form-hover-fill);
  }

  &--dropdown {
    @include button(
      $button-dropdown-fill,
      $button-dropdown-border,
      $button-dropdown-color,
      $button-dropdown-hover-fill,
      $button-dropdown-hover-border,
      $button-dropdown-hover-color,
      $button-dropdown-disabled-fill,
      $button-dropdown-disabled-border,
      $button-dropdown-disabled-color
    );

    .button__spinner {
      display: inline-block;
      position: static;
    }

    .button__label {
      font-weight: normal;
      line-height: 30px;
      overflow-x: hidden;
      text-align: left;
      text-overflow: ellipsis;
      visibility: visible;
      white-space: nowrap;
    }
  }

  &--lg {
    @include font-button--lg;
    height: 36px;
    padding: 0 spacing(md);
  }

  &--md {
    @include font-button--md;
    height: 32px;
    padding: 0 spacing(md);
  }

  &--sm {
    @include font-button--sm;
    height: 24px;
    padding: 0 spacing(sm);
  }

  &__label {
    position: relative;
    margin-left: spacing(sm);

    &:first-child {
      margin-left: 0;
    }
  }

  &__spinner {
    flex: 0 0 auto;
    display: none;
  }

  &:not(&--loading) {
    .button__spinner {
      display: none;
    }
  }

  &.button--primary,
  &.button--secondary,
  &.button--tertiary,
  &.button--form {
    .button__spinner {
      flex: 0 0 auto;
      position: absolute;
      top: 0;
      bottom: 0;
      right: 0;
      left: 0;
    }
  }

  &--loading {
    pointer-events: none;

    &:after {
      display: none;
    }

    .button__spinner {
      position: static;
    }

    .button__label {
      height: 0;
      overflow-y: hidden;
    }
  }

  &--with-arrow {
    &::after {
      content: "";
      display: inline-block;
      margin-left: spacing(lg);
      position: relative;
    }

    &.button--primary {
      &::after {
        @include arrow-down(4px, color-palette(white));
      }
    }

    &.button--dropdown {
      padding: 0 spacing(md);
      max-width: 248px;

      &::after {
        @include arrow-down(4px, $button-dropdown-arrow);
      }

      &.button--disabled {
        &::after {
          @include arrow-down(4px, color-palette(gray, 60));
        }
      }
    }

    &.button--open {
      &:after {
        border-top: none;
      }

      &.button--primary {
        &::after {
          @include arrow-up(4px, color-palette(white));
        }
      }

      &.button--dropdown {
        &::after {
          @include arrow-up(4px, $button-dropdown-arrow);
        }
      }
    }

    &.button--loading {
      &::after {
        display: none;
      }

      .button__spinner {
        position: static;
        margin-left: spacing(md);
      }

      .button__label {
        height: auto;
        overflow-y: visible;
      }
    }
  }

  &--icon-only {
    align-items: center;
    display: flex;
    height: 24px;
    justify-content: center;
    padding: 0;
    width: 24px;

    .button__label {
      line-height: 16px;
      margin-right: 0;
    }

    &.button--dropdown {
      border-color: transparent;
      color: color-palette(gray, 75);

      &:hover,
      &--hover {
        color: color-palette(gray, 95);
      }
    }
  }

  &.button--focus,
  &.button:focus {
    @include focus();
  }
}
